[CORS解释](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS)

### 涉及到跨域的情况
* 由 XMLHttpRequest 或 Fetch 发起的跨域 HTTP 请求。
* Web 字体 (CSS 中通过 @font-face 使用跨域字体资源), 因此，网站就可以发布 TrueType 字体资源，并只允许已授权网站进行跨站调用。
* WebGL 贴图
* 使用 drawImage 将 Images/video 画面绘制到 canvas
* 样式表（使用 CSSOM）
注, 不包含: 
* `<img>` `<script></script>` `background-image: url('xxx')`等;




理解: 跨域需要在目标服务器上做配置, 允许哪个域名的网站访问,
eg: 服务器 `localhost:5555` 和 `localhost:7777`; 5555服务器的页面访问7777服务器的服务, 需要在7777中配置'允许5555服务器来访问';

1. 直接指定域名
```js
// 7777服务器
app.use(async (ctx, next) => {
    ctx.response.set('Access-Control-Allow-Origin', 'http://localhost:5555');
    ctx.response.set('Access-Control-Allow-Credentials', true);
    // 下面这两段, 看起来并不必须;
    // ctx.response.set('Access-Control-Allow-Headers', 'Content-Type,Content-Length, Authorization, Accept,X-Requested-With');
    // ctx.response.set('Access-Control-Allow-Methods', 'PUT,POST,GET,DELETE,OPTIONS');

    await next();
});
```

2. 用`koa2-cors`插件
* 安装`yarn add koa2-cors`
* 使用
```js
// 在目标服务器中
const cors = require('koa2-cors');

// 必须的只有 credentials 选项;
app.use( cors({
    // origin: function(ctx){
    //     return 'http://localhost:5555';
    // },
    // exposeHeaders: ['WWW-Authenticate', 'Server-Authorization'],
    // maxAge: 5,
    credentials: true,
    // allowMethods: ['GET', 'POST', 'DELETE'],
    // allowHeaders: ['Content-Type', 'Authorization', 'Accept'],
}))
```